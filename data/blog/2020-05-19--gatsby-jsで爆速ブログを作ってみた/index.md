---
title: Gatsby.jsで爆速ブログを作ってみた
createdDate: "2020-05-20"
updatedDate: "2020-05-20"
author: Ken
tags:
  - Gatsby.js
  - React
  - Netlify
image: ../images/Gatsby_logo.png
draft: false
---

今年に入り上司に言われたのがきっかけでReact Nativeの勉強を始めました。
なので上司にはせめてこういうものを開発しようとしています、ということを言わなければと思い準備していたのですが、
偶然Gatsby.jsというものがあることを知り、試したくなって早速自分のブログ（このサイト）を作ってみました。要するに脱線。
<br />


## Gatsby.jsとは
Gatsby.jsはReactベースの静的サイトジェネレーターです。

### 通常のサイト（動的サイト）の場合

![動的サイト](./dynamic_site.png)

HTTPリクエストを受けてからサーバーサイドの言語（PHP等）が動いてページを作るため、
URLにアクセスしてからページが表示されるまで時間がかかります。

### Gatsby.jsの場合

![Gatsby.js](./gatsby_flow.png)

<a href="https://www.gatsbyjs.org/" target="_blank">参考：Gatsby.js公式</a>

Gatsby.jsなどの静的サイトジェネレーターの場合は、ビルド時にソースから静的HTMLを生成しておいてくれるので、
URLにアクセスしたらすぐHTMLが返ってくる状態になります。

そのため、ネット上ではよく「爆速」と表現されてますが、表示速度がとにかく速いです。

また上の図ではdata sourcesとして .mdファイルからデータを取得していますが、
Gatsby.jsは.mdファイルの他に、WordPressやDB等色々なところからデータを持ってこれるようです。


<br />

## ブログ作成
そんな超高性能なフレームワークのGatsby.jsですが、環境構築はとても簡単です。

実際僕も以下の記事を見ながら、（のんびりやったので5分ではないですが、多分20分くらいで）簡単にこのサイトを作れてしまいました。

<a href="https://qiita.com/k-penguin-sato/items/7554e5e7e90aa10ae225" target="_blank">GatsbyとNetlifyで簡単にブログを作成 - Qiita</a>

僕は.mdファイルを直接編集していますが、必要であれば
<a href="https://www.contentful.com/" target="_blank">Contentful</a>
などを連携させることもできるようです。
サーバーレスなので、Netlifyの無料枠で運用コスト0円なのも嬉しい。


<!--
Gatsby.jsではデータソースを取得するロジックは、GraphQLのクエリを書きます。

GraphQLはJSONライクな構文のクエリを書くと、クエリと同じ構造のJSON形式で結果を取得できます。

何だか
-->
<br />

## 注意点

### webアプリには不向き
<!--
静的サイトということでDBが必要ありません。

このサイトもデータソースは基本的にブログ記事の.mdファイルや画像ファイルのみで、build時にGraphQLのクエリで取り込みます。

DBがないということはセキュリティ的にはプラスなのですが、
-->

このサイトのデータソースは基本的にブログ記事の.mdファイルや画像ファイルのみで、build時にGraphQLのクエリで取り込まれます。

逆にデータソースの変化をページに反映させるにはいちいちbuildしなければならないため、

例えば、コメント機能のようなものはおそらく単独では実現できません。

（このサイトもコメント機能はdisqusという外部サービスを使用しています。）

WebアプリのようにDBへの読み書きが多い用途には使えなさそうです。

<!--
設定なしでSSRが使える便利な環境が、すぐ構築できるのはメリットかもしれませんが。
-->

### React必須
ただ、
<a href="https://www.gatsbyjs.org/starters/?v=2" target="_blank">スターター</a>
が充実しているので、僕みたいなReact初心者でも始めやすいと思います。

僕は
<a href="https://www.gatsbyjs.org/starters/fabien0102/gatsby-starter/" target="_blank">こちら(gatsby-starter)</a>を使用しました。
Typescriptで、（楽をしたかったので）できるだけそのまま使えそうなものを選んだつもりでしたが、
案の定細かい部分は色々直す羽目に。まあ、Reactなので楽しいです。GraphQLもちょこっと触っただけなのであれですが、使いやすそうな印象です。

ドキュメントも親切丁寧ですが英語のみです。

<br />

## 抱負

結局のところブログを書くのはどのくらいモチベーションが続くか分からないのですが（苦笑）、せっかくなので10件くらいは記事を書きたいです。

Gatsby.jsを色々いじってみて、楽しいのでとりあえず満足しています。

（触ってみてGatsby.jsはかなり奥が深いことがわかったので、そのうちこんな適当な記事ではなくもっと掘り下げたいという気がしてきました）

<br/>
そろそろReact Nativeの開発に戻ります...
